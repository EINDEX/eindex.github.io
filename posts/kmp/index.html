<!DOCTYPE html>
<html lang="en" charset="utf-8">
  





<head>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://preview.blog-2j7.pages.dev/feed.xml">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="author" itemprop="author" content="EINDEX">
  
  <title>KMP ç®—æ³• &bull; EINDEX&#x27;s Blog</title>
  <meta property="og:title" content="KMP ç®—æ³• &bull; EINDEX&#x27;s Blog" />
  

  <!-- Required meta tags -->
  <meta charset="utf-8" />


  <!-- **** BEGINNING, favicons **** -->

  <!-- generics -->

  <!-- iOS -->

  <!-- Android -->

  <!-- Windows 8, IE 10 -->

  <!-- Windows 8.1 and up, IE 11 -->

  <!-- **** CONCLUSION, favicons **** -->

  <!-- CSS/SCSS -->
  <link rel="stylesheet" href="https://preview.blog-2j7.pages.dev/css/index.css?h=f8faf511a8be60c25ce46e10d43e25cc133e48203f3dc383262447b1abda9301" />  <style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style>
  
  <link rel="stylesheet" href="https://preview.blog-2j7.pages.dev/styles/fontawesome.min.css?h=7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f">

  <link rel="webmention" href="https://webmention.io/eindex.me/webmention" />
  <link rel="pingback" href="https://webmention.io/eindex.me/xmlrpc" />
  
  
  
  <link rel="apple-touch-icon" sizes="512x512" href="/favicon-512.png">
  
  <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512.png">
  
  
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png">
  
  <link rel="manifest" href="/manifest.json">

  



  
    
  

  
    
  
    
  





<meta property="og:url" content="https://preview.blog-2j7.pages.dev/posts/kmp/">
<meta property="og:site_name" content="EINDEX&#x27;s Blog">
<meta property="og:image" content="https://preview.blog-2j7.pages.dev/images/avatar.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="KMP ç®—æ³• &bull; EINDEX&#x27;s Blog">

<meta name="twitter:site" content="@eindex_li">
<meta name="twitter:creator" content="@eindex_li">
<meta name="twitter:image" content="https://preview.blog-2j7.pages.dev/images/avatar.png">

<script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "BlogPosting",
      "headline": "KMP ç®—æ³•",
      "image": "https://preview.blog-2j7.pages.dev/images/avatar.png",
      
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://preview.blog-2j7.pages.dev/posts/kmp/"
      },
      
      "datePublished": "2018-05-11",
      
      
      "author": {
        "@type": "Person",
        "name": "EINDEX",
        "url": "https://preview.blog-2j7.pages.dev/about"
      },
      "publisher": {
        "@type": "Organization",
        "name": "EINDEX's Blog",
        "logo": {
          "@type": "ImageObject",
          "url": "https://preview.blog-2j7.pages.dev/images/avatar.png"
      },
      "keywords": ["ç®—æ³•","KMP","Python"]
    }
</script>

  
  
  
</head>
  <body>
    <nav class="navbar">
    <ul class="items">
      <li>
        
        <a class="site-link" href="https:&#x2F;&#x2F;preview.blog-2j7.pages.dev&#x2F;"><img
            class="avatar"
            src="https:&#x2F;&#x2F;preview.blog-2j7.pages.dev&#x2F;processed_images&#x2F;985d495e6e585ad000.png"
            alt="Workflow"
        /><span class="site-name">EINDEX&#x27;s Blog</span></a>
      </li>
      <li class="delimiter"></li>
      
      <li class="button">
        <a
          href="https://preview.blog-2j7.pages.dev/archive/"
          >å½’æ¡£</a
        >
      </li>
      
      <li class="button">
        <a
          href="https://preview.blog-2j7.pages.dev/links/"
          >å‹é“¾</a
        >
      </li>
      
      <li class="button">
        <a
          href="https://preview.blog-2j7.pages.dev/about/"
          >å…³äº</a
        >
      </li>
      
    </ul>
</nav>


    <div class="content">
        <main>
            
  <article data-clarity-region="article">
    
<section class="header">
<section class="title-area">
    
    <h1 class="title">  
    <a href="https:&#x2F;&#x2F;preview.blog-2j7.pages.dev&#x2F;posts&#x2F;kmp&#x2F;">KMP ç®—æ³•</a>
    </h1>
  </section>
  <section class="meta-area">
  
    <span><i class="far fa-calendar-days"></i><time>2018-05-11</time></span>
  
  
    
    
    <a class="categories"  href="https:&#x2F;&#x2F;preview.blog-2j7.pages.dev&#x2F;categories&#x2F;suan-fa&#x2F;"><i class="fa-solid fa-inbox"></i>ç®—æ³•</a>
  
    <span><i class="fas fa-clock"></i> 4 mins</span>
  </section>
</section>

    <section class="main">
        
        <blockquote>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒKnuth-Morris-Prattå­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•ï¼ˆç®€ç§°ä¸ºKMPç®—æ³•ï¼‰å¯åœ¨ä¸€ä¸ªä¸»æ–‡æœ¬å­—ç¬¦ä¸²Så†…æŸ¥æ‰¾ä¸€ä¸ªè¯Wçš„å‡ºç°ä½ç½®ã€‚æ­¤ç®—æ³•é€šè¿‡è¿ç”¨å¯¹è¿™ä¸ªè¯åœ¨ä¸åŒ¹é…æ—¶æœ¬èº«å°±åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®šä¸‹ä¸€ä¸ªåŒ¹é…å°†åœ¨å“ªé‡Œå¼€å§‹çš„å‘ç°ï¼Œä»è€Œé¿å…é‡æ–°æ£€æŸ¥å…ˆå‰åŒ¹é…çš„å­—ç¬¦ã€‚</p>
</blockquote>
<span id="continue-reading"></span>
<blockquote>
<p>è¿™ä¸ªç®—æ³•æ˜¯ç”±é«˜å¾·çº³ï¼ˆDonald Ervin Knuthï¼‰å’Œæ²ƒæ©Â·æ™®æ‹‰ç‰¹åœ¨1974å¹´æ„æ€ï¼ŒåŒå¹´è©¹å§†æ–¯Â·HÂ·è«é‡Œæ–¯ä¹Ÿç‹¬ç«‹åœ°è®¾è®¡å‡ºè¯¥ç®—æ³•ï¼Œæœ€ç»ˆç”±ä¸‰äººäº1977å¹´è”åˆå‘è¡¨ã€‚</p>
</blockquote>
<h2 id="åŸç†">åŸç†</h2>
<p>å°†å¾…åŒ¹é…å­—ç¬¦ä¸²å‘½åä¸º m æºå­—ç¬¦ä¸²å‘½åä¸º S ã€‚
æœ¬ç®—æ³•å¯¹å¾…åŒ¹é…å­—ç¬¦ä¸²åšå¤„ç†ä¹‹åï¼Œæ‰¾åˆ°ä»–çš„çœŸå‰ç¼€å’ŒçœŸåç¼€ã€‚å¹¶é€šè¿‡çœŸå‰ç¼€ä¸åç¼€é‡åˆçš„æ•°é‡çš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯åœ¨åŒ¹é…çŠ¶æ€ä¸­å‘ç”ŸçŸ¢é…æ—¶ï¼Œä½äºåŸå§‹å­—ç¬¦ä¸²ä¸Š S çš„æŒ‡é’ˆç§»åŠ¨çš„æ–¹å‘ä¸è·ç¦»ã€‚</p>
<p>ç®€å•çš„è¯´å°±æ˜¯åŒ¹é…å¤±è´¥æ—¶ã€‚é€šè¿‡ä¹‹å‰çš„çœŸå‰ç¼€å’Œåç¼€è¡¨ï¼Œç›´æ¥ç§»åŠ¨åœ¨åŒ¹é…å­—ç¬¦ä¸²ä¸Šçš„æŒ‡é’ˆï¼Œè¾¾åˆ°å‡å°‘æ— ç”¨åŒ¹é…çš„æ•ˆæœã€‚</p>
<h2 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h2>
<p>èŠ‚çº¦æ—¶é—´ï¼Œç›¸æ¯”äºæœ´ç´ çš„åŒ¹é…æ–¹å¼ï¼Œæ–°çš„åŒ¹é…ç®—æ³•åªéœ€è¦ O(m + n)çš„æ—¶é—´å¤æ‚åº¦ å’Œ é¢å¤– O(m)çš„ç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´æ˜¯ç”¨æ¥ä¿å­˜çœŸå‰ç¼€å’ŒçœŸåç¼€çš„ç»“æœçš„ã€‚</p>
<h2 id="å®ç°">å®ç°</h2>
<p>KMP åŒ¹é…çš„å…³é”®åœ¨äºåˆå§‹åŒ–åŒ¹é…å­—ç¬¦ä¸²ã€‚</p>
<pre data-lang="python" style="background-color:#272822;color:#f8f8f2;" class="language-python "><code class="language-python" data-lang="python"><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">partial_table</span><span>(</span><span style="font-style:italic;color:#fd971f;">pattern</span><span>:</span><span style="font-style:italic;color:#66d9ef;">str</span><span>):
</span><span>    </span><span style="color:#75715e;">&quot;&quot;&quot;
</span><span style="color:#75715e;">    å½“å­—ç¬¦ä¸²é•¿åº¦ä¸º1çš„æ—¶å€™ï¼Œä¸éœ€è¦è¿›è¡ŒæŸ¥è¡¨ï¼Œç›´æ¥å¾ªç¯åŒ¹é…æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(n)
</span><span style="color:#75715e;">    &quot;&quot;&quot;
</span><span>    front </span><span style="color:#f92672;">= </span><span>[pattern[:x</span><span style="color:#f92672;">+</span><span style="color:#ae81ff;">1</span><span>] </span><span style="color:#f92672;">for </span><span>x </span><span style="color:#f92672;">in </span><span style="color:#66d9ef;">range</span><span>(</span><span style="color:#66d9ef;">len</span><span>(pattern))]
</span><span>
</span><span>    </span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">cal_table_val</span><span>(</span><span style="font-style:italic;color:#fd971f;">sub_pattern</span><span>):
</span><span>        </span><span style="color:#f92672;">return </span><span style="color:#66d9ef;">max</span><span>([</span><span style="color:#ae81ff;">0</span><span>]</span><span style="color:#f92672;">+</span><span>[</span><span style="color:#66d9ef;">len</span><span>(front[:i]) </span><span style="color:#f92672;">for </span><span>i </span><span style="color:#f92672;">in </span><span style="color:#66d9ef;">range</span><span>(</span><span style="color:#66d9ef;">len</span><span>(sub_pattern)) </span><span style="color:#f92672;">if </span><span>sub_pattern[</span><span style="color:#f92672;">-</span><span>i:] </span><span style="color:#f92672;">in </span><span>front[:i]])
</span><span>
</span><span>    </span><span style="color:#f92672;">return </span><span>[cal_table_val(pattern[:i </span><span style="color:#f92672;">+ </span><span style="color:#ae81ff;">1</span><span>]) </span><span style="color:#f92672;">for </span><span>i </span><span style="color:#f92672;">in </span><span style="color:#66d9ef;">range</span><span>(</span><span style="color:#66d9ef;">len</span><span>(pattern))]
</span><span>
</span><span>
</span><span style="font-style:italic;color:#f92672;">def </span><span style="color:#a6e22e;">kmp</span><span>(</span><span style="font-style:italic;color:#fd971f;">pattern</span><span>, </span><span style="font-style:italic;color:#fd971f;">string</span><span>, </span><span style="font-style:italic;color:#fd971f;">first</span><span style="color:#f92672;">=</span><span style="color:#ae81ff;">True</span><span>):
</span><span>    </span><span style="color:#f92672;">if not </span><span>pattern </span><span style="color:#f92672;">or not </span><span>string:
</span><span>        </span><span style="color:#f92672;">return -</span><span style="color:#ae81ff;">1
</span><span>    
</span><span>    res </span><span style="color:#f92672;">= </span><span>[]
</span><span>    </span><span style="color:#75715e;"># åŒ¹é…å­—ç¬¦ä¸²é•¿åº¦ä¸º1 ä¸éœ€è¦å»ºè¡¨
</span><span>    </span><span style="color:#f92672;">if </span><span style="color:#66d9ef;">len</span><span>(pattern) </span><span style="color:#f92672;">== </span><span style="color:#ae81ff;">1</span><span>:
</span><span>        </span><span style="color:#f92672;">for </span><span>i, k </span><span style="color:#f92672;">in </span><span style="color:#66d9ef;">enumerate</span><span>(string):
</span><span>            </span><span style="color:#f92672;">if </span><span>k </span><span style="color:#f92672;">== </span><span>pattern:
</span><span>                </span><span style="color:#f92672;">if </span><span>first:
</span><span>                    </span><span style="color:#f92672;">return </span><span>i
</span><span>                res.append(i)
</span><span>        </span><span style="color:#f92672;">return </span><span>res
</span><span>
</span><span>    pt </span><span style="color:#f92672;">= </span><span>partial_table(pattern)
</span><span>    i, j </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">0</span><span>, </span><span style="color:#ae81ff;">0
</span><span>    lp, ls </span><span style="color:#f92672;">= </span><span style="color:#66d9ef;">len</span><span>(pattern), </span><span style="color:#66d9ef;">len</span><span>(string)
</span><span>    compile_flag </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">False
</span><span>    </span><span style="color:#f92672;">while </span><span>j </span><span style="color:#f92672;">- </span><span>i </span><span style="color:#f92672;">&lt; </span><span>ls </span><span style="color:#f92672;">- </span><span>lp:
</span><span>        </span><span style="color:#f92672;">if </span><span>string[j] </span><span style="color:#f92672;">== </span><span>pattern[i]:
</span><span>            i </span><span style="color:#f92672;">+= </span><span style="color:#ae81ff;">1
</span><span>            j </span><span style="color:#f92672;">+= </span><span style="color:#ae81ff;">1          
</span><span>            compile_flag </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">True
</span><span>            </span><span style="color:#f92672;">if </span><span>i </span><span style="color:#f92672;">== </span><span style="color:#66d9ef;">len</span><span>(pattern):
</span><span>                </span><span style="color:#f92672;">if </span><span>first:
</span><span>                    </span><span style="color:#f92672;">return </span><span>j </span><span style="color:#f92672;">- </span><span>i
</span><span>                res.append(j </span><span style="color:#f92672;">- </span><span>i)
</span><span>                i </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">0
</span><span>        </span><span style="color:#f92672;">elif </span><span>string[j] </span><span style="color:#f92672;">!= </span><span>pattern[i] </span><span style="color:#f92672;">and </span><span>compile_flag:
</span><span>            </span><span style="color:#75715e;"># ä¹‹å‰ä¸ºåŒ¹é…çŠ¶æ€ éœ€è¦ç§»åŠ¨åŒ¹é…æ•°ç»„æŒ‡é’ˆ
</span><span>            compile_flag </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">False
</span><span>            i </span><span style="color:#f92672;">-= </span><span>i </span><span style="color:#f92672;">- </span><span>pt[i</span><span style="color:#f92672;">-</span><span style="color:#ae81ff;">1</span><span>]
</span><span>        </span><span style="color:#f92672;">elif </span><span>string[j] </span><span style="color:#f92672;">!= </span><span>pattern[i] </span><span style="color:#f92672;">and not </span><span>compile_flag:
</span><span>            </span><span style="color:#75715e;"># ä¹‹å‰ä¸ºä¸åŒ¹é…çŠ¶æ€ åŒ¹é…æŒ‡é’ˆå½’ 0 
</span><span>            i </span><span style="color:#f92672;">= </span><span style="color:#ae81ff;">0
</span><span>            j </span><span style="color:#f92672;">+= </span><span style="color:#ae81ff;">1
</span><span>
</span><span>    </span><span style="color:#f92672;">return </span><span>res
</span><span>
</span><span>partial_table(</span><span style="color:#e6db74;">&#39;ABCDABD&#39;</span><span>) </span><span style="color:#75715e;"># [0, 0, 0, 0, 1, 2, 0]
</span><span>kmp(</span><span style="color:#e6db74;">&#39;ABCDABD&#39;</span><span>,</span><span style="color:#e6db74;">&#39;BBC ABCDAB ABCDABCDABDE&#39;</span><span>) </span><span style="color:#75715e;"># 15
</span><span>
</span><span>
</span></code></pre>

    </section>
    <section class="post-footer">
        
        
<div class="tags">
    <i class="fa-solid fa-tags"></i>
    
        <span class="tag"><a href="">KMP</a></span>
    
        <span class="tag"><a href="">Python</a></span>
    
</div>

    </section>
    
    <section class="comments">
        
<script src="https://giscus.app/client.js"
    data-repo="EINDEX&#x2F;blog"
    data-repo-id="R_kgDOGWb6Yg"
    data-category-id="DIC_kwDOGWb6Ys4CAKn-"
    data-mapping="pathname"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-theme="light"
    data-lang="zh-CN"
    crossorigin="anonymous"
    async>
</script>

    </section>
    
</article>


        </main>
        <aside>
            
        </aside>
    </div>
    <footer class="footer">
  <div class="content">
    <div class="item">
    </div>
    <div class="item"></div>
    <div class="item profile">
      <img class="avatar" src="/images/avatar.png" />
      <ul class="links">
        
        <li>
          <a href="https:&#x2F;&#x2F;github.com&#x2F;eindex" rel="me" target="_blank"
            ><i class="fab fa-github"></i><span>Github</span>
          </a>
        </li>
        
        <li>
          <a href="https:&#x2F;&#x2F;twitter.com&#x2F;eindex_li" rel="me" target="_blank"
            ><i class="fab fa-twitter"></i><span>Twitter</span>
          </a>
        </li>
        
        <li>
          <a href="https:&#x2F;&#x2F;t.me&#x2F;eindex" rel="me" target="_blank"
            ><i class="fab fa-telegram"></i><span>Telegram</span>
          </a>
        </li>
        
        <li>
          <a href="mailto:eindex.me@outlook.com" rel="me" target="_blank"
            ><i class="fas fa-envelope"></i><span>Email</span>
          </a>
        </li>
        
      </ul>
    </div>
  </div>
  
  
    
    
  
  <span class="webring">
<a href="https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous">â†</a>
An IndieWeb Webring ğŸ•¸ğŸ’
<a href="https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next">â†’</a>
</span>
  <a
    class="powered-by"
    href="https://github.com/EINDEX/qingzhuo"
    target="_blank"
    >Powered By QingZhuo
  </a>
  
</footer>

  </body>
  
</html>