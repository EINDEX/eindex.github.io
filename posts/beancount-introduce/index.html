<!doctype html><html charset=utf-8 lang=en><head><link href=https://eindex.me/feed.xml rel=alternate title=RSS type=application/rss+xml><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=EINDEX itemprop=author name=author><title>å¤å¼è®°è´¦å·¥å…· Beancount â€¢ EINDEX's Blog</title><meta content="å¤å¼è®°è´¦å·¥å…· Beancount â€¢ EINDEX's Blog" property=og:title><meta charset=utf-8><link href="https://eindex.me/css/index.css?h=f8faf511a8be60c25ce46e10d43e25cc133e48203f3dc383262447b1abda9301" rel=stylesheet><style>@-moz-document url-prefix() {.lazy:-moz-loading {visibility:hidden;}}.ieOnly {display: none;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.ieOnly {display: block;}}</style><link href="https://eindex.me/styles/fontawesome.min.css?h=7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f" rel=stylesheet><link href=https://webmention.io/eindex.me/webmention rel=webmention><link href=https://webmention.io/eindex.me/xmlrpc rel=pingback><link href=/favicon-512.png rel=apple-touch-icon sizes=512x512><link href=/favicon-512.png rel=icon sizes=512x512 type=image/png><link href=/favicon-192.png rel=icon sizes=192x192 type=image/png><link href=/manifest.json rel=manifest><meta content=https://eindex.me/posts/beancount-introduce/ property=og:url><meta content="EINDEX's Blog" property=og:site_name><meta content=https://eindex.me/images/avatar.png property=og:image><meta content=summary name=twitter:card><meta content="å¤å¼è®°è´¦å·¥å…· Beancount â€¢ EINDEX's Blog" name=twitter:title><meta content=@eindex_li name=twitter:site><meta content=@eindex_li name=twitter:creator><meta content=https://eindex.me/images/avatar.png name=twitter:image><script type=application/ld+json>
    {
      "@context": "https://schema.org/",
      "@type": "BlogPosting",
      "headline": "å¤å¼è®°è´¦å·¥å…· Beancount",
      "image": "https://eindex.me/images/avatar.png",
      
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://eindex.me/posts/beancount-introduce/"
      },
      
      "datePublished": "2019-11-30",
      
      
      "author": {
        "@type": "Person",
        "name": "EINDEX",
        "url": "https://eindex.me/about"
      },
      "publisher": {
        "@type": "Organization",
        "name": "EINDEX's Blog",
        "logo": {
          "@type": "ImageObject",
          "url": "https://eindex.me/images/avatar.png"
      },
      "keywords": ["Beancount","æŠ•èµ„"]
    }
</script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "ao1gr1m9ku");</script><body><nav class=navbar><ul class=items><li><a class=site-link href=https://eindex.me><img alt=Workflow class=avatar src=https://eindex.me/processed_images/985d495e6e585ad000.png><span class=site-name>EINDEX's Blog</span></a><li class=delimiter><li class=button><a href=https://eindex.me/archive/>å½’æ¡£</a><li class=button><a href=https://eindex.me/links/>å‹é“¾</a><li class=button><a href=https://eindex.me/about/>å…³äº</a></ul></nav><div class=content><main><article data-clarity-region=article><section class=header><section class=title-area><h1 class=title><a href=https://eindex.me/posts/beancount-introduce/>å¤å¼è®°è´¦å·¥å…· Beancount</a></h1></section><section class=meta-area><span><i class="far fa-calendar-days"></i><time>2019-11-30</time></span><a class=categories href=https://eindex.me/categories/tou-zi/><i class="fa-solid fa-inbox"></i>æŠ•èµ„</a><span><i class="fas fa-clock"></i> 6 mins</span></section></section><section class=main><p>æœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å¤å¼è®°è´¦å’Œ Beancount çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><span id=continue-reading></span><h2 id=ä¸ºä»€ä¹ˆè¦è®°è´¦>ä¸ºä»€ä¹ˆè¦è®°è´¦</h2><p>è®°è´¦æ˜¯ç†è´¢çš„ç¬¬ä¸€æ­¥ï¼Œç†Ÿè¯è¯´å¾—å¥½ï¼šâ€ä½ ä¸ç†è´¢ï¼Œæ‰ä¸ç†ä½ ã€‚â€œ<p>è®°è´¦å¯ä»¥æ˜ç¡®è‡ªå·±æ¯ä¸€ç¬”é’±èŠ±åœ¨å“ªå»äº†ï¼Œè¿™ä¸ªæœˆæœ€å¤§çš„å¼€é”€æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå¯¹è‡ªå·±çš„å†²åŠ¨æ¶ˆè´¹ã€ä¸å¿…è¦æ¶ˆè´¹èƒ½æœ‰ä¸€ä¸ªåæ€ã€‚<p>æˆ‘æ›¾ä½¿ç”¨è¿‡å¾ˆå¤šè®°è´¦è½¯ä»¶å¦‚ï¼šæŒ–è´¢ã€éšæ‰‹è®°ã€ç½‘æ˜“æœ‰é’±ã€MoneyWizã€MOZE ç­‰ï¼Œå…¶å®è®°è´¦æœ€å¤§çš„é—®é¢˜åœ¨äºå¾ˆéš¾åšæŒä¸‹æ¥ï¼Œå› ä¸ºçŸ­æœŸæ¥çœ‹è®°è´¦çš„æ”¶ç›Šå¹¶ä¸é«˜ï¼Œè€Œä»é•¿è¿œæ¥çœ‹ï¼Œè´¦æœ¬ä¹Ÿèƒ½ä½“ç°ç»æµçš„å¥åº·çŠ¶å†µã€‚<h2 id=å¤å¼è®°è´¦æ˜¯ä»€ä¹ˆ>å¤å¼è®°è´¦æ˜¯ä»€ä¹ˆ</h2><p>å¤å¼è®°è´¦ï¼ˆDouble Entry Bookkeepingï¼‰æ˜¯ä»¥èµ„äº§ä¸æƒç›Šå¹³è¡¡å…³ç³»ä½œä¸ºè®°è´¦åŸºç¡€ï¼Œå¯¹æ¯ä¸€ç¬”è´¦å•ï¼Œéƒ½è¦ä»¥ç›¸ç­‰çš„é‡‘é¢åœ¨ä¸¤ä¸ªç›¸äº’è”ç³»çš„è´¦æˆ·ä¸­è¿›è¡Œè®°å½•ã€‚<p>åŸç†ï¼š <code>èµ„äº§ = è´Ÿå€º + æ‰€æœ‰è€…æƒç›Š</code><p>å¤å¼è®°è´¦çš„ä¼˜ç‚¹æ˜¯ï¼š<ul><li>è´¦æˆ·å¯¹åº”å…³ç³»æ¸…æ¥šï¼Œå¯ä»¥é²œæ˜çš„è¡¨ç¤ºå„ç§ç»æµæ´»åŠ¨çš„æ¥é¾™å»è„‰ã€‚<li>æœ‰å€Ÿå¿…æœ‰è´·ï¼Œå€Ÿè´·å¿…ç›¸ç­‰çš„è®°è´¦æ–¹å¼ï¼Œå¯¹äºæ£€æŸ¥è´¦å•æ˜¯å¦è®°å¯¹éå¸¸æœ‰å¸®åŠ©ã€‚</ul><h2 id=ä½•ä¸º_Beancount>ä½•ä¸º Beancount</h2><p>Beancount æ˜¯ä¸€ä¸ªç”¨ Python å®ç°çš„å¼€æºå¤å¼è®°è´¦è½¯ä»¶ã€‚<p>æ•°æ®æ–‡ä»¶åŸºäºçº¯æ–‡æœ¬ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒç¨‹åºå‡ºé—®é¢˜ï¼Œæ•°æ®æ²¡æ³•çœ‹æ‡‚ã€‚<p>Beancountï¼ˆfavaï¼‰çš„ç•Œé¢å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ã€‚ <img alt=-w2638 src=https://eindex.me/posts/beancount-introduce/media/15676038764861/15676114899083.jpg> <img alt=-w1319 src=https://eindex.me/posts/beancount-introduce/media/15676038764861/15676115071325.jpg><p>Beancount çš„ä¼˜ç‚¹ï¼š<ol><li>å¼€æºï¼Œå¯ä»¥è‡ªå·±å†™åŠŸèƒ½ã€‚<li>æ•°æ®åŸºäºçº¯æ–‡æœ¬ï¼Œè‡ªå·±æŒæ¡æ‰€æœ‰æ•°æ®ï¼Œä¸æ‹…å¿ƒéšç§æ³„éœ²ã€‚<li>æ”¯æŒå„ç§å›¾æ ‡ï¼Œæ”¯æŒSQLæŸ¥è¯¢ç”ŸæˆæŠ¥è¡¨ã€‚<li>æ”¯æŒé¢„ç®—ï¼ˆfavaï¼‰ã€‚<li>æ”¯æŒæ— é™è´¦æœ¬ã€æ— é™è´¦æˆ·ã€æ— é™å¸ç§ã€‚<li>å¯ä»¥å¯¼å…¥å„ç§è´¦å•æ–‡ä»¶ï¼ˆæœ‰äº›éœ€è¦å†™ä»£ç æ”¯æŒï¼‰ã€‚<li>å¯ä»¥ç”¨ Gitã€iCloud ç­‰å·¥å…·æ¥ç®¡ç†è´¦æœ¬ã€‚</ol><p>ä¸ä»…å¦‚æ­¤ï¼ŒBeancount è¿˜å¯ä»¥é‡åŒ–å¹´å‡ï¼Œäº§å‡ç­‰ç­‰éæ ‡å‡†é‡‘èæ ‡çš„ã€‚<p>ä¾‹å¦‚è®²å…¬å¸å¹´å‡è®°ä¸ºä¸€ç¬”æ”¶å…¥ï¼Œä»å…¬å¸è´¦æˆ·è½¬å…¥åˆ°ä¸ªäººè´¦æˆ·ï¼Œæˆä¸ºèµ„äº§ã€‚ä½¿ç”¨æ‰å¹´å‡ï¼Œåˆ™æŠŠå¹´å‡ä»ä¸ªäººèµ„äº§è½¬å‡ºåˆ°æ¶ˆè´¹å³å¯ã€‚è¿™æ ·å°±ç›¸å½“äºæŠŠå¹´å‡æ¶ˆè´¹æ‰äº†ã€‚è€Œå¹´å‡çš„è´§å¸å•ä½å¯ä»¥è®¾ç½®æˆ Dayã€‚<p>å†™åœ¨ Beancount é‡Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ã€‚<pre class=language-beancount data-lang=beancount style=background-color:#272822;color:#f8f8f2;><code class=language-beancount data-lang=beancount><span>2019-04-24 * "CompanyName" "è¯·å‡ä¸€å¤©ä¼‘æ¯"
</span><span>  Assets:Leave                              -1.00 DAY
</span><span>  Expenses:Health
</span><span>
</span><span>2019-04-01 * "CompanyName" "å¹´å‡-åˆå§‹åŒ–"
</span><span>  Income:Job:CompanyName:Leave
</span><span>  Assets:Leave                                 +7.00 DAY
</span></code></pre><h2 id=åŸºæœ¬è¯­æ³•>åŸºæœ¬è¯­æ³•</h2><h3 id=åŸºæœ¬æ ¼å¼>åŸºæœ¬æ ¼å¼</h3><pre style=background-color:#272822;color:#f8f8f2;><code><span>YYYY-MM-DD &LTdirective> &LTarguments...>
</span></code></pre><h3 id=åˆ›å»ºè´§å¸>åˆ›å»ºè´§å¸</h3><pre style=background-color:#272822;color:#f8f8f2;><code><span>option "operating_currency" "CNY"
</span></code></pre><h3 id=è´¦æˆ·ç›¸å…³>è´¦æˆ·ç›¸å…³</h3><p>åˆ›å»ºè´¦æˆ·<pre style=background-color:#272822;color:#f8f8f2;><code><span>1970-01-01 open Assets:Bank:ABC CNY
</span></code></pre><p>å¤‡æ³¨è´¦æˆ·<pre style=background-color:#272822;color:#f8f8f2;><code><span>1970-01-01 note Assets:Bank:ABC "å†œè¡Œå¡"
</span></code></pre><p>å…³é—­å¸æˆ·ï¼Œè´¦æˆ·å…³é—­åå°±å¯ä»¥åœ¨ç°å®ç•Œé¢ä¸Šè¿‡æ»¤æ‰å·²ç»å…³é—­çš„è´¦æˆ·ã€‚<pre style=background-color:#272822;color:#f8f8f2;><code><span>1970-01-02 close Assets:Bank:ABC
</span></code></pre><h3 id=äº¤æ˜“>äº¤æ˜“</h3><p>è¿™æ˜¯å•ç¬”ç®€å•äº¤æ˜“çš„å†™æ³•ï¼Œè¡¨ç¤ºæˆ‘å»ç¾é£Ÿé£æš´ç”¨å¾®ä¿¡æ”¯ä»˜åƒäº†ä¸ªç›’é¥­ã€‚<pre style=background-color:#272822;color:#f8f8f2;><code><span>2019-08-02 * "ç¾é£Ÿé£æš´" "ç›’é¥­"
</span><span>  Assets:Wechat:EINDEX                                  -18 CNY
</span><span>  Expenses:Food:Restaurant:Lunch       
</span></code></pre><h3 id=è®¾ç½®ä»·æ ¼>è®¾ç½®ä»·æ ¼</h3><p>å¯ä»¥è¿™æ˜¯å„ç§â€œè´§å¸â€ä¹‹é—´çš„ä»·æ ¼è½¬æ¢ã€‚å¦‚æœç”¨ä¸Šç¨‹åºå‘˜æ€ç»´ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°è‚¡ç¥¨ä»·æ ¼è·Ÿè¸ªã€æ±‡ç‡è·Ÿè¸ªç­‰ç­‰ã€‚æ¥æé«˜è´¦æœ¬çš„å‡†ç¡®åº¦ã€‚<pre style=background-color:#272822;color:#f8f8f2;><code><span>2019-10-01 price USD 7 CNY
</span></code></pre><h3 id=ä½™é¢è‡ªåŠ¨è®¾ç½®>ä½™é¢è‡ªåŠ¨è®¾ç½®</h3><p>è¿™æ˜¯ä¸€ä¸ªå·æ‡’å¿…å¤‡åŠŸèƒ½ï¼Œä¸‹é¢çš„ <code>pad</code>ï¼Œæˆ‘å†œè¡Œå¡è‡ªåŠ¨å¹³è´¦ä½¿ç”¨<code>Equity:Opening-Balances</code>ï¼Œæ˜å¤©çš„ <code>balance</code> è¡¨ç¤ºåœ¨ 2019å¹´10æœˆ02æ—¥æ—¶è¿™å¼ å¡çš„ä½™é¢ä¸º4000CNYï¼Œå¦‚æœæ—§çš„è´¦å•ä¸å¹³å°±ä¼šä»<code>Equity:Opening-Balances</code>è‡ªåŠ¨å¹³è´¦ã€‚<pre style=background-color:#272822;color:#f8f8f2;><code><span>2019-10-01 pad Assets:Bank:ABC Equity:Opening-Balances
</span><span>
</span><span>2019-10-02 balance Assets:Bank:ABC 4000 CNY
</span></code></pre><p>å¦‚æœæœªæ¥è¦åœ¨è¿™ä¸ªè´¦æˆ·è¿‡å»çš„è´¦ç›®ä¸Šåšåˆ æ”¹ï¼Œ2019å¹´10æœˆ1æ—¥çš„ä½™é¢ä¹Ÿä¼šæ˜¯4000å…ƒä¸å˜ã€‚<h2 id=ä½¿ç”¨_Beancount>ä½¿ç”¨ Beancount</h2><p>é¦–å…ˆéœ€è¦å®‰è£… Python 3ï¼Œç„¶åå®‰è£… beancountã€favaã€‚<pre style=background-color:#272822;color:#f8f8f2;><code><span>pip install beancount fava
</span></code></pre><p><code>fava</code> æ˜¯ beancount çš„ä¸€ä¸ª WebUI å®ç°ï¼Œå¯ä»¥å¯è§†åŒ–çš„çœ‹è§è‡ªå·±çš„è´¦æœ¬ã€‚<h3 id=Example>Example</h3><p>å®˜æ–¹æä¾›äº†ä¸€ä¸ª Beancount çš„ä½¿ç”¨ç”¨ä¾‹ã€‚<pre style=background-color:#272822;color:#f8f8f2;><code><span>bean-example > example.bean
</span><span>fava example.bean
</span></code></pre><p>ç„¶åæ‰“å¼€ <code>localhost:5000</code> å°±å¯ä»¥åœ¨æœ¬åœ°ä½“éªŒ Beancount ä¸ fava äº†ã€‚<p><img alt=-w1315 src=https://eindex.me/posts/beancount-introduce/media/15676038764861/15676114399432.jpg></section><section class=post-footer><div class=tags><i class="fa-solid fa-tags"></i><span class=tag><a>Beancount</a></span></div></section><section class=comments><script async crossorigin=anonymous data-category-id=DIC_kwDOGWb6Ys4CAKn- data-emit-metadata=0 data-lang=zh-CN data-mapping=pathname data-reactions-enabled=1 data-repo=EINDEX/blog data-repo-id=R_kgDOGWb6Yg data-theme=light src=https://giscus.app/client.js></script></section></article></main><aside></aside></div><footer class=footer><div class=content><div class=item></div><div class=item></div><div class="item profile"><img class=avatar src=/images/avatar.png><ul class=links><li><a href=https://github.com/eindex rel=me target=_blank><i class="fab fa-github"></i><span>Github</span> </a><li><a href=https://twitter.com/eindex_li rel=me target=_blank><i class="fab fa-twitter"></i><span>Twitter</span> </a><li><a href=https://t.me/eindex rel=me target=_blank><i class="fab fa-telegram"></i><span>Telegram</span> </a><li><a href=mailto:eindex.me@outlook.com rel=me target=_blank><i class="fas fa-envelope"></i><span>Email</span> </a></ul></div></div><span class=webring> <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/previous>â†</a> An IndieWeb Webring ğŸ•¸ğŸ’ <a href=https://xn--sr8hvo.ws/%F0%9F%95%90%F0%9F%89%91%F0%9F%88%B6/next>â†’</a> </span><a class=powered-by href=https://github.com/EINDEX/qingzhuo target=_blank>Powered By QingZhuo </a></footer>